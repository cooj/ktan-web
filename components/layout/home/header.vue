<template>
    <!-- å¤´éƒ¨å¼€å§‹ -->
    <header class="header">
        <!-- é¡¶éƒ¨ -->
        <div class="width_module main-bg-color Top_box">
            <div class="width_box Top_module flex">
                <span class="Top_title">æ¬¢è¿è®¿é—®å¹¿ä¸œé¹°æµ‹æŠ€æœ¯æœ‰é™å…¬å¸å®˜æ–¹ç½‘ç«™ï¼</span>
                <div class="Top_right flex">
                    <div class="Top_list flex">
                        <div class="Top_icon Top_phone">
                            <img src="assets/image/icon_phone.png" alt="">
                        </div>
                        <span>400-6261-158</span>
                    </div>
                    <!-- <a class="Top_list flex" href="JavaScript:;">
                        <div class="Top_icon"><img src="assets/picture/icon_user.png" alt=""></div>
                        <span>ç”¨æˆ·ç™»å½•</span>
                    </a> -->
                    <div class="langue_module flex">
                        <a target="" class="langue_list flex" href="">
                            <div class="Top_icon"><img src="assets/image/zh-Hans.png" alt=""></div>
                            <span>ä¸­æ–‡ç‰ˆ</span>
                        </a>
                        <a target="" class="langue_list flex" href="https://eaglotest.com/">
                            <div class="Top_icon"><img src="assets/image/en.png" alt=""></div>
                            <span>English</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- å¯¼èˆª -->
        <div class="width_box dh_module flex">
            <a target="" href="" class="logo_icon"><img src="assets/image/ç½‘ç«™logoæ©™è‰².png" alt=""></a>
            <div class="nav_module flex">
                <nav>
                    <ul class="flex">
                        <li v-for="item in menuList.filter(i => i.status)" :key="item.id" class="nav_list"
                            :class="{ nav_list1: item.children?.length }">
                            <NuxtLinkLocale :to="item.href" class="nav_btn"
                                :class="{ nav_active: setActiveMenu(item.href || '') }">
                                {{ $lang(item.title, item.title_en) }}
                            </NuxtLinkLocale>

                            <!-- å­èœå•åˆ—è¡¨ -->
                            <div v-if="item.is_goods || item.children?.length" class="nav_hide">
                                <ul v-if="item.is_goods" class="nav_ul">
                                    <li v-for="opt in classifyList" :key="opt.id" class="nav_li">
                                        <NuxtLinkLocale :to="`/product?cid=${opt.id}`" class="nav_title">
                                            {{ $lang(opt.title, opt.title_en) }}
                                        </NuxtLinkLocale>
                                        <!-- <a target="" class="nav_title" href="95-zh-Hans.html">é«˜ä½å‹æ ¸ç›¸ç›¸åºç³»åˆ—</a> -->
                                        <div v-if="opt.children?.length" class="nav_sublevel">
                                            <NuxtLinkLocale v-for="sub in opt.children" :key="sub.id"
                                                :to="`/product?cid=${sub.id}`">
                                                {{ $lang(sub.title, sub.title_en) }}
                                            </NuxtLinkLocale>
                                            <!-- <a target="" href="103.html">æœ¬åœ°è¯­éŸ³æ™ºèƒ½æ ¸ç›¸ä»ª</a>
                                            <a target="" href="102.html">è¿œç¨‹å«æ˜Ÿæˆæ—¶æ ¸ç›¸ä»ª</a>
                                            <a target="" href="101.html">ç½‘ç»œåŸºç«™å®šç›¸æ ¸ç›¸ä»ª</a>
                                            <a target="" href="173-zh-Hans.html">ä¸­ç½®æŸœä¸“ç”¨æ ¸ç›¸ä»ª</a>
                                            <a target="" href="100.html">é«˜ä½å‹æ ¸ç›¸ç›¸åºä»ª</a> -->
                                        </div>
                                    </li>
                                    <template v-if="0">
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="105.html">ç”µç¼†è¯†åˆ«è·¯å¾„ä»ªç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="109-zh-Hans.html">å¤šåŠŸèƒ½ç”µç¼†è¯†åˆ«ä»ª</a>
                                                <a target="" href="108.html">ç»¼åˆç®¡çº¿è·¯å¾„ä»ª</a>
                                                <a target="" href="187.html">ç”µç¼†æ•…éšœæµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="80-zh-Hans.html">ç»ç¼˜ç”µé˜»æµ‹è¯•ä»ªç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="172.html">åœ¨çº¿ç»ç¼˜ç”µé˜»ç›‘æµ‹æŠ¥è­¦ä»ª</a>
                                                <a target="" href="86-zh-Hans.html">æ‰‹æŒå¼ç»ç¼˜ç”µé˜»æµ‹è¯•ä»ª</a>
                                                <a target="" href="190.html">ç®±å¼ç»ç¼˜ç”µé˜»æµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="155-zh-Hans.html">æ¥åœ°ç”µé˜»æµ‹è¯•ä»ªç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="83-zh-Hans.html">æ•°å­—å¼æ¥åœ°ç”µé˜»æµ‹è¯•ä»ª</a>
                                                <a target="" href="82-zh-Hans.html">æ¥åœ°ç”µé˜»/åœŸå£¤ç”µé˜»æµ‹è¯•ä»ª</a>
                                                <a target="" href="174-zh-Hans.html">åŒé’³æ¥åœ°ç”µé˜»æµ‹è¯•ä»ª</a>
                                                <a target="" href="191.html">åœ¨çº¿å¼æ¥åœ°ç”µé˜»æµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="94-zh-Hans.html">æ™ºèƒ½ç›¸ä½ä¼å®‰è¡¨ç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="99.html">å•é’³ç›¸ä½ä¼å®‰è¡¨</a>
                                                <a target="" href="98-zh-Hans.html">åŒé’³ç›¸ä½ä¼å®‰è¡¨</a>
                                                <a target="" href="96-zh-Hans.html">ä¸‰é’³ç›¸ä½ä¼å®‰è¡¨</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="177-zh-Hans.html">ç”µèƒ½è´¨é‡åˆ†æä»ªç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="178-zh-Hans.html">ç”µèƒ½è´¨é‡åˆ†æä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="68-zh-Hans.html">é«˜ä½å‹å˜æ¯”æµ‹è¯•ä»ª</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="78-zh-Hans.html">æ— çº¿é«˜å‹å˜æ¯”æµ‹è¯•ä»ª</a>
                                                <a target="" href="74-zh-Hans.html">ä½å‹å˜æ¯”æµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="87.html">é«˜å‹ç”µæµç”µå‹è¡¨ç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="92-zh-Hans.html">é«˜ä½å‹ç”µæµÂ·æ¼ç”µæµæµ‹è¯•ä»ª</a>
                                                <a target="" href="90-zh-Hans.html">é«˜ä½å‹éªŒç”µÂ·ç”µå‹æµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="165.html">é’³å½¢ç”µæµåŠŸç‡è¡¨ç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="167.html">é’³å½¢ç”µæµè¡¨</a>
                                                <a target="" href="169.html">é’³å½¢åŠŸç‡è¡¨</a>
                                                <a target="" href="170.html">æŸ”æ€§çº¿åœˆå¤§ç”µæµè®°å½•ä»ª</a>
                                                <a target="" href="166.html">å˜å‹å™¨é“èŠ¯ç”µæµæµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="179-zh-Hans.html">ç›´é˜»å›è·¯ç­‰ç”µä½ç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="180.html">ç­‰ç”µä½æµ‹è¯•ä»ª</a>
                                                <a target="" href="181-zh-Hans.html">ç›´æµç”µé˜»æµ‹è¯•ä»ª</a>
                                                <a target="" href="188.html">å›è·¯ç”µé˜»æµ‹è¯•ä»ª</a>
                                                <a target="" href="189.html">å¯¼é€šç”µé˜»æµ‹è¯•ä»ª</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="58.html">ç”µæµä¼ æ„Ÿå™¨ç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="71-zh-Hans.html">é’³å½¢ç”µæµä¼ æ„Ÿå™¨</a>
                                                <a target="" href="70-zh-Hans.html">å¼€åˆå¼ç”µæµä¼ æ„Ÿå™¨</a>
                                                <a target="" href="72.html">æŸ”æ€§çº¿åœˆç”µæµä¼ æ„Ÿå™¨</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="182-zh-Hans.html">å…¶ä»–ä¸“ç”¨ä»ªå™¨ç³»åˆ—</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="60-zh-Hans.html">ä»ªå™¨ç®±/ä»ªå™¨åŒ…</a>
                                            </div>
                                        </li>
                                        <li class="nav_li">
                                            <a target="" class="nav_title" href="192.html">ç”µæ± å†…é˜»æµ‹è¯•ä»ª</a>
                                            <div class="nav_sublevel">
                                                <a target="" href="193.html">è“„ç”µæ± æ£€æµ‹ä»ª</a>
                                            </div>
                                        </li>
                                    </template>
                                </ul>
                                <ul v-else class="nav_ul">
                                    <li v-for="sub in item.children" :key="sub.id" class="nav_li">
                                        <NuxtLinkLocale :to="sub.href" class="nav_title">
                                            {{ $lang(sub.title, sub.title_en) }}
                                        </NuxtLinkLocale>
                                        <!-- <a target="" class="nav_title" href="aboutUs.html">å…³äºæˆ‘ä»¬</a> -->
                                    </li>

                                    <!-- <li class="nav_li">
                                        <a target="" class="nav_title" href="2-zh-Hans.html">ä¼ä¸šæ–‡åŒ–</a>
                                    </li>
                                    <li class="nav_li">
                                        <a target="" class="nav_title" href="3-zh-Hans.html">ä¼ä¸šæ¶æ„</a>
                                    </li>
                                    <li class="nav_li">
                                        <a target="" class="nav_title" href="4.html">è£èª‰èµ„è´¨</a>
                                    </li> -->
                                </ul>
                                <!-- äº§å“åˆ—è¡¨ -->
                            </div>
                        </li>
                    </ul>
                </nav>
                <div class="nav_search">
                    <img src="assets/image/icon_search.png" alt="">
                </div>
            </div>
        </div>
        <!-- æœç´¢ -->
        <div class="search_module">
            <form class="search_box" action="/home/Product/center">
                <button class="search_icon" type="submit">
                    <img src="assets/image/icon_search.png" alt="">
                </button>
                <input class="search_ipt" type="text" name="keyword" placeholder="æœç´¢å…³é”®å­—">
                <p class="search_shut">
                    x
                </p>
            </form>
        </div>

        <!-- ç§»åŠ¨ç«¯é¡¶éƒ¨ -->
        <div class="searchs_module">
            <div class="searchs_switch">
                <img src="assets/image/list_icon.png" alt="">
            </div>
            <a target="" href="" class="searchs_logo"><img src="assets/image/icon_logo.png" alt=""></a>
            <div class="nav_search">
                <img src="assets/image/icon_search.png" alt="">
            </div>
        </div>
        <div class="navs_module">
            <div class="navs_box">
                <div class="navs_explain main-bg-color">
                    <span>æ¬¢è¿æ¥åˆ° å¹¿ä¸œé¹°æµ‹æŠ€æœ¯æœ‰é™å…¬å¸å®˜æ–¹ç½‘ç«™ï¼</span>
                    <span>400-6261-158</span>
                </div>
                <div class="navs_top main-bg-color">
                    <a target="" href="" class="navs_language flex">
                        <div><img src="assets/image/zh-Hans.png" alt=""></div>
                        <span>ä¸­æ–‡ç‰ˆ</span>
                    </a>
                    <a target="" href="index1.html" class="navs_language flex">
                        <div><img src="assets/image/en.png" alt=""></div>
                        <span>English</span>
                    </a>
                </div>
                <!--            <a href="JavaScript:;" class="navs_user"> -->
                <!--                <figure class="navs_icon"><img src="/template/home/static/img/public/icon_user.png" alt=""></figure> -->
                <!--                <p>ç”¨æˆ·ç™»å½•</p> -->
                <!--            </a> -->
                <nav>
                    <ul class="navs_ul">
                        <li v-for="item in menuList.filter(i => i.status)" :key="item.id" class="navs_li">
                            <NuxtLinkLocale :to="item.href" class="navs_btn">
                                {{ $lang(item.title, item.title_en) }}
                            </NuxtLinkLocale>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
</template>

<script lang="ts" setup>
const { $lang } = useNuxtApp()
const systemInfo = await useSystemState().getSystemInfo()
// console.log(dat)

const menuState = useMenuState()

const menuList = await menuState.getMenuList()
if (process.client) {
    setTimeout(() => {
        console.log('ğŸš€ ~ file: header.vue:21 ~ menuList:', menuList)
    }, 1500)
}

const classifyList = await useGoodsClassifyState().getClassify()
// console.log('classifyList :>> ', classifyList)

const setActiveMenu = (item: string) => {
    const href = menuState.activeMenu.value?.href

    return href === item
    // if (href === item) {
    // }
    console.log(menuState.activeMenu.value?.href)
    const route = useRoute()
    // console.log(route)
    // const url = useRequestURL()
    // console.log(url)

    const path = route.path
    // let path=url.pathname
    // const path = '/public/upload/product/2021/04-17/S-042KD.jpg'

    // æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ–œæ çš„ç´¢å¼•
    const firstSlashIndex = path.indexOf('/')
    let first = ''
    if (firstSlashIndex !== -1) {
        // æˆªå–ç¬¬ä¸€ä¸ªæ–œæ åŠå…¶å‰é¢çš„å†…å®¹
        first = path.substring(0, firstSlashIndex + 1) // åŒ…æ‹¬æ–œæ 
    }

    if (path === item) {
        return true
    } else if (item !== '/' && (path === `/${item}` || item === first)) {
        return true
    } else {
        return false
    }
}
</script>

<style lang="scss" scoped>
// @import url(~/assets/css/header.css);
</style>
